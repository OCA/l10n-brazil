-
  Create a Lead for a Company
-
  !record {model: crm.lead, id: crm_lead_company}:
    name: Test Company Lead
    legal_name: Teste Empresa
    cnpj: 56.647.352/0001-98
    stage_id: crm.stage_lead1
    partner_name: Test Partner
    inscr_est: 079.798.013.363
    inscr_mun: 99999999
-
  I mark the lead as lost
-
  !python {model: crm.lead, id: crm_lead_company}:
    self.action_set_lost()
-
  In order to test the conversion of a lead into a opportunity,
-
  I set lead to open stage.
-
   !python {model: crm.lead, id: crm_lead_company}:
     self.write({'stage_id':ref("crm.stage_lead1"), 'active':True})
-
  I check if the lead stage is "Open".
-
  !assert {model: crm.lead, id: crm_lead_company, string: Lead stage is Open}:
     - stage_id.sequence == 1
