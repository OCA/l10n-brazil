<?xml version="1.0" encoding="utf-8"?>
<!-- Copyright 2018 KMEE INFORMATICA LTDA, Grupo Zenir
     License AGPL-3.0 or later (http://www.gnu.org/licenses/agpl). -->

<odoo>

    <record model="ir.ui.view" id="sped_documento_form_view">
        <field name="name">sped.documento.form (in l10n_br_mdfe)</field>
        <field name="model">sped.documento</field>
        <field name="arch" type="xml">
            <form string="Emissão de MDF-E" duplicate="false">
                <header>
                    <field name="permite_cancelamento" invisible="1"/>
                    <field name="permite_inutilizacao" invisible="1"/>
                    <field name="permite_alteracao" invisible="1" />
                    <!-- HEADER VAZIO PARA SE ADICIONAR OS BOTOES EM OUTRAS VISOES E MODULOS HERDADOS -->
                </header>
                <sheet>
                    <field name="emissao" invisible="1" />
                    <field name="modelo" invisible="1" />
                    <field name="id" invisible="1"/>
                    <field name="currency_id" invisible="1"/>
                    <field name="currency_aliquota_id" invisible="1"/>
                    <field name="importado_xml" invisible="1"/>
                    <field name="operacao_subsequente_ids" invisible="1"/>
                    <div class="oe_button_box" name="button_box">
                    </div>
                    <group>
                        <group col="4" colspan="4">
                            <field name="empresa_id" colspan="4" options="{'no_create': True, 'no_open': True}" required="1" attrs="{'readonly': ['|', ('id', '!=', False), ('permite_alteracao', '=', False)]}" domain="[('contribuinte', '=', '1')]" />
                            <field name="empresa_cnpj_cpf" colspan="2" readonly="1" />
                            <newline />
                            <field name="operacao_id" colspan="4" domain="[('modelo', '=', modelo), ('emissao', '=', emissao), '|', ('empresa_id', '=', False), ('empresa_id', '=', empresa_id)]" options="{'no_create': True, 'no_open': True}" attrs="{'readonly': ['|', ('documentos_subsequentes_gerados', '=', True), '|', '&amp;', ('id', '!=', False), ('importado_xml', '=', False), ('permite_alteracao', '=', False)], 'required': [('importado_xml', '=', False)]}" />
                            <field name="documentos_subsequentes_gerados" invisible="True"/>
                            <newline />
                            <field name="numero" required="1" colspan="2" attrs="{'readonly': [('permite_alteracao', '=', False)]}" />
                            <field name="serie" required="1" colspan="2" attrs="{'readonly': [('permite_alteracao', '=', False)]}" />
                            <newline />
                            <field name="data_hora_emissao" colspan="2" required="1" attrs="{'readonly': [('permite_alteracao', '=', False)]}" />
                            <field name="data_hora_entrada_saida" colspan="2" required="1" attrs="{'readonly': [('permite_alteracao', '=', False)]}" />
                            <newline />
                            <field name="data_emissao" invisible="1" />
                            <field name="data_entrada_saida" invisible="1" />
                            <newline />
                            <field name="chave" colspan="4" attrs="{'readonly': [('permite_alteracao', '=', False)]}"/>
                            <newline />
                            <field name="documento_impresso" colspan="2" />

                        </group>
                    </group>
                    <notebook>
                        <page name="rodoviario" string="Rodoviário">
                            <notebook>
                                <page string="Veiculo de Tração" name="veiculo_tracao">
                                    <group>
                                        <group string="Veículo" name="dados_veiculo">
                                            <field name="veiculo_id"/>
                                            <field name="veiculo_ciot"/>
                                            <field name="veiculo_placa"/>
                                            <field name="veiculo_estado_id"/>
                                            <field name="veiculo_tipo_rodado"/>
                                            <field name="veiculo_tipo_carroceria"/>
                                            <field name="veiculo_tara_kg"/>
                                            <field name="veiculo_capacidade_kg"/>
                                            <field name="veiculo_capacidade_m3"/>
                                        </group>
                                        <group string="Condutores" name="condutores">
                                            <!--<field name="condutor_id" colspan="2"/>-->
                                            <field name="condutor_ids" nolabel="1" colspan="2">
                                                <tree>
                                                    <field name="condutor_id" invisible="1"/>
                                                    <field name="name"/>
                                                    <field name="cpf"/>
                                                </tree>
                                                <form>
                                                    <group>
                                                        <field name="condutor_id"/>
                                                        <field name="name" required="1"/>
                                                        <field name="cpf" required="1"/>
                                                    </group>
                                                </form>
                                            </field>
                                        </group>
                                    </group>
                                </page>
                                <page string="Reboque" name="reboque">
                                    <!--TODO:-->
                                </page>
                                <page string="CIOT" name="ciot">
                                    <!--TODO:-->
                                </page>
                                <page string="Contratantes" name="contratantes">
                                    <!--TODO:-->
                                </page>
                                <page string="Vale Pedágio" name="vale_pedagio">
                                    <!--TODO:-->
                                </page>
                            </notebook>
                            <!--<group>-->
                                <!--<group colspan="6" col="6">-->
                                    <!--<separator string="Destinatário" colspan="6" attrs="{'invisible': [('entrada_saida', '=', '0')]}" />-->
                                    <!--<separator string="Remetente" colspan="6" attrs="{'invisible': [('entrada_saida', '=', '1')]}" />-->
                                    <!--<field name="participante_id" nolabel= "1" colspan="6" required="1" options="{'no_open': True, 'no_create': True}" domain="[('cnpj_cpf', '!=', False)]" attrs="{'readonly': [('permite_alteracao', '=', False)]}" />-->
                                    <!--<newline />-->
                                    <!--<field name="participante_razao_social" string="Nome completo Razão Social" colspan="6" />-->
                                    <!--<newline />-->
                                    <!--<field name="participante_fantasia" colspan="6" attrs="{'invisible': [('participante_tipo_pessoa', '!=', 'J')]}" />-->
                                    <!--<newline />-->
                                    <!--<field name="participante_tipo_pessoa" invisible="1" />-->
                                    <!--<newline />-->
                                    <!--<field name="participante_cnpj_cpf" colspan="2" />-->
                                    <!--<field name="participante_contribuinte" colspan="2" />-->
                                    <!--<field name="participante_ie" colspan="2" attrs="{'invisible': [('participante_contribuinte', '!=', '1')]}" />-->
                                    <!--<newline />-->
                                    <!--<separator string="Contato" colspan="6" />-->
                                    <!--<newline />-->
                                    <!--<field name="participante_fone" />-->
                                    <!--<field name="participante_celular" />-->
                                    <!--<field name="participante_fone_comercial" />-->
                                    <!--<newline />-->
                                    <!--<field name="participante_email" colspan="6" />-->
                                    <!--<newline />-->
                                    <!--<separator string="Endereço" colspan="6" />-->
                                    <!--<newline />-->
                                    <!--<field name="participante_endereco" colspan="6"/>-->
                                    <!--<newline />-->
                                    <!--<field name="participante_numero" />-->
                                    <!--<field name="participante_complemento" colspan="4" />-->
                                    <!--<newline />-->
                                    <!--<field name="participante_bairro" colspan="6" />-->
                                    <!--<newline />-->
                                    <!--<field name="participante_municipio_id" options="{'no_open': True, 'no_create': True}" colspan="6" />-->
                                    <!--<newline />-->
                                    <!--<field name="participante_cep" />-->
                                    <!--<newline />-->
                                    <!--<field name="participante_estado" invisible="1" />-->
                                    <!--<field name="participante_eh_orgao_publico" invisible="1" />-->
                                <!--</group>-->
                            <!--</group>-->
                        </page>
                        <!--<page name="itens" string="Itens">-->
                            <!--<group>-->
                                <!--<group colspan="4" col="4">-->
                                    <!--<field name="item_ids" nolabel="1" colspan="4" attrs="{'readonly': [('permite_alteracao', '=', False)]}"/>-->
                                <!--</group>-->
                            <!--</group>-->
                        <!--</page>-->
                        <page name="itens_mdfe" string="Entregas">

                        </page>
                        <page name="percurso" string="Percurso">
                            <group col="6">
                                <field name="carregamento_municipio_ids" widget="many2many_tags" colspan="2"/>
                                <field name="percurso_estado_ids"  widget="many2many_tags"  colspan="2"/>
                                <field name="descarregamento_estado_id"  colspan="2"/>
                            </group>
                        </page>

                        <page name="totais" string="Totais">
                            <group colspan="4" col="4">
                                <group colspan="4" col="4" string="Valores principais">
                                    <field name="vr_produtos" colspan="2" string="Produtos/serviços" />
                                    <field name="vr_nf" colspan="2" string="Total da NF" />
                                    <newline />
                                    <field name="vr_frete" colspan="2" string="Frete" />
                                    <field name="vr_fatura" colspan="2" string="Total da fatura" />
                                    <newline />
                                    <field name="vr_seguro" colspan="2" string="Seguro" />
                                    <newline />
                                    <field name="vr_outras" colspan="2" string="Outras" />
                                    <field name="vr_pagamentos" colspan="2"/>
                                    <field name="vr_desconto" colspan="2" string="Desconto" />
                                    <field name="vr_troco" colspan="2"/>
                                    <field name="vr_operacao" colspan="2" string="Operação" />
                                </group>
                                <group name="lacres">
                                    <field name="lacre_ids" nolabel="1">
                                        <tree editable="top">
                                            <field name="name" string="Lacres"/>
                                        </tree>
                                    </field>

                                </group>
                            </group>
                        </page>
                        <page name="mdfe_seguro" string="Seguro">
                            <field name="seguro_ids">
                                <tree>
                                    <field name="documento_id" invisible="1"/>
                                    <field name="responsavel_seguro"/>
                                    <field name="responsavel_cnpj_cpf"/>
                                    <field name="name"/>
                                    <field name="cnpj_cpf"/>
                                    <field name="numero_apolice"/>
                                </tree>
                                <form string="Seguro">
                                    <group>
                                        <field name="responsavel_seguro"/>
                                        <field name="responsavel_cnpj_cpf"/>
                                        <field name="seguradora_id"/>
                                        <field name="name"/>
                                        <field name="cnpj_cpf"/>
                                        <field name="numero_apolice"/>
                                    </group>
                                    <field name="averbacao_ids">
                                        <tree editable="top">
                                            <field name="seguro_id" invisible="1"/>
                                            <field name="name"/>
                                        </tree>
                                    </field>
                                </form>
                            </field>
                        </page>
                        <!--<page name="transporte" string="Transporte">-->
                            <!--<group>-->
                                <!--<group colspan="4" col="4">-->
                                    <!--<separator string="Frete e transporte" />-->
                                    <!--<newline />-->
                                    <!--<field name="modalidade_frete" attrs="{'required': '1', 'readonly': [('permite_alteracao', '=', False)]}" />-->
                                    <!--<newline />-->
                                    <!--<field name="transportadora_id" colspan="4" options="{'no_create': True, 'no_open': True}" attrs="{'invisible': ['!', ('modalidade_frete', 'in', ['0', '1', '2'])], 'readonly': [('permite_alteracao', '=', False)]}" />-->
                                    <!--<newline />-->
                                    <!--<field name="veiculo_id" options="{'no_create': True, 'no_open': True}" attrs="{'readonly': [('permite_alteracao', '=', False)]}" />-->
                                    <!--<field name="reboque_1_id" attrs="{'invisible': [('veiculo_id', '=', False)], 'readonly': [('permite_alteracao', '=', False)]}" options="{'no_create': True, 'no_open': True}" domain="['!', ('id', 'in', [veiculo_id])]" />-->
                                    <!--<newline />-->
                                    <!--<field name="reboque_2_id" attrs="{'invisible': [('reboque_1_id', '=', False)], 'readonly': [('permite_alteracao', '=', False)]}" options="{'no_create': True, 'no_open': True}" domain="['!', ('id', 'in', [veiculo_id, reboque_1_id])]" />-->
                                    <!--<field name="reboque_3_id" attrs="{'invisible': [('reboque_2_id', '=', False)], 'readonly': [('permite_alteracao', '=', False)]}" options="{'no_create': True, 'no_open': True}" domain="['!', ('id', 'in', [veiculo_id, reboque_1_id, reboque_2_id])]" />-->
                                    <!--<newline />-->
                                    <!--<field name="reboque_4_id" attrs="{'invisible': [('reboque_3_id', '=', False)], 'readonly': [('permite_alteracao', '=', False)]}" options="{'no_create': True, 'no_open': True}" domain="['!', ('id', 'in', [veiculo_id, reboque_1_id, reboque_2_id, reboque_3_id])]" />-->
                                    <!--<field name="reboque_5_id" attrs="{'invisible': [('reboque_4_id', '=', False)], 'readonly': [('permite_alteracao', '=', False)]}" options="{'no_create': True, 'no_open': True}" domain="['!', ('id', 'in', [veiculo_id, reboque_1_id, reboque_2_id, reboque_3_id, reboque_4_id])]" />-->
                                    <!--<newline />-->
                                    <!--<field name="endereco_retirada_id" colspan="4" domain="[('participante_id', '=', participante_id)]" options="{'no_create': True, 'no_open': True}" attrs="{'invisible': ['!', ('modalidade_frete', 'in', ['0', '1', '2'])], 'readonly': [('permite_alteracao', '=', False)]}" />-->
                                    <!--<newline />-->
                                    <!--<field name="endereco_entrega_id" colspan="4" domain="[('participante_id', '=', participante_id)]" options="{'no_create': True, 'no_open': True}" attrs="{'invisible': ['!', ('modalidade_frete', 'in', ['0', '1', '2'])], 'readonly': [('permite_alteracao', '=', False)]}" />-->
                                    <!--<newline />-->
                                    <!--<separator string="Volumes" />-->
                                    <!--<newline />-->
                                    <!--<field name="volume_ids" colspan="4" nolabel="1" attrs="{'readonly': [('permite_alteracao', '=', False)]}">-->
                                        <!--<tree string="Volumes" editable="bottom">-->
                                            <!--<field name="quantidade" />-->
                                            <!--<field name="peso_bruto" />-->
                                            <!--<field name="peso_liquido" />-->
                                            <!--<field name="especie" />-->
                                            <!--<field name="marca" />-->
                                            <!--<field name="numero" />-->
                                            <!--<field name="volume" />-->
                                        <!--</tree>-->
                                    <!--</field>-->
                                    <!--<group name="Exportação" colspan="4" col="4" attrs="{'invisible': ['|', ('entrada_saida', '!=', '1'), ('participante_estado', '!=', 'EX')]}">-->
                                        <!--<separator string="Exportação" colspan="4" />-->
                                        <!--<field name="exportacao_estado_embarque_id" attrs="{'readonly': [('permite_alteracao', '=', False)]}" />-->
                                        <!--<newline />-->
                                        <!--<field name="exportacao_local_embarque" colspan="4" attrs="{'readonly': [('permite_alteracao', '=', False)]}" />-->
                                    <!--</group>-->
                                <!--</group>-->
                            <!--</group>-->
                        <!--</page>-->
                        <page name="outras" string="Outras informações">
                            <group>
                                <group colspan="4" col="4">
                                    <field name="finalidade_nfe" attrs="{'required': '1', 'readonly': [('permite_alteracao', '=', False)]}" colspan="2" string="Finalidade" />
                                    <field name="tipo_emissao_nfe" attrs="{'required': '1', 'readonly': [('permite_alteracao', '=', False)]}" colspan="2" string="Tipo de emissão" />
                                    <newline />
                                    <field name="tipo_emitente" attrs="{'required': '1', 'readonly': [('permite_alteracao', '=', False)]}" colspan="2" />
                                    <field name="tipo_transportador" colspan="2" />
                                    <field name="modalidade_transporte" attrs="{'required': '1', 'readonly': [('permite_alteracao', '=', False)]}" colspan="2" />
                                    <newline />
                                    <field name="ambiente_nfe" attrs="{'required': '1', 'readonly': [('permite_alteracao', '=', False)]}" colspan="2" string="Ambiente" />
                                    <field name="documento_origem_id" attrs="{'readonly': [('permite_alteracao', '=', False)]}" colspan="2" string="Documento de Origem" />
                                    <newline />
                                    <field name="entrada_saida" attrs="{'required': '1', 'readonly': ['|', ('id', '!=', False),('permite_alteracao', '=', False)]}" colspan="2" />
                                    <field name="regime_tributario" attrs="{'required': '1', 'readonly': ['|', ('id', '!=', False), ('permite_alteracao', '=', False)]}" colspan="2" />
                                    <newline />
                                    <separator string="Informações complementares" colspan="4" />
                                    <field name="infcomplementar" colspan="4" nolabel="1" attrs="{'readonly': [('permite_alteracao', '=', False)]}" />
                                    <separator string="Informações adicionais de interesse do fisco" colspan="4" />
                                    <field name="infadfisco" colspan="4" nolabel="1" attrs="{'readonly': [('permite_alteracao', '=', False)]}" />
                                </group>
                            </group>
                        </page>
                    </notebook>
                </sheet>
                <div class="oe_chatter">
                    <field name="message_follower_ids" widget="mail_followers"/>
                    <field name="message_ids" widget="mail_thread" options='{"thread_level": 1}'/>
                </div>
            </form>
        </field>
    </record>

    <record model="ir.ui.view" id="sped_documento_mdfe_tree">
        <field name="name">sped.documento.mdfe.tree</field>
        <field name="model">sped.documento</field>
        <field name="priority">9999</field>
        <field name="arch" type="xml">
            <tree string="Emissão de MDF-e">
                <field name="currency_id" invisible="1"/>
                <field name="currency_aliquota_id" invisible="1"/>
                <field name="emissao" invisible="1"/>
                <field name="modelo" invisible="1"/>
                <field name="empresa_id" />
                <field name="operacao_id" />
                <field name="serie" />
                <field name="numero" />
                <field name="data_emissao" />
                <field name="data_entrada_saida" />
                <!--<field name="participante_id" />-->
                <field name="vr_nf" sum="vr_nf" />
            </tree>
        </field>
    </record>

    <!--<record model="ir.ui.view" id="sped_documento_search_view">-->
        <!--<field name="name">sped.documento.search (in l10n_br_mdfe)</field>-->
        <!--<field name="model">sped.documento</field>-->
        <!--<field name="inherit_id" ref="TODO othermodule.search_view"/>-->
        <!--<field name="arch" type="xml">-->
            <!--&lt;!&ndash; TODO &ndash;&gt;-->
        <!--</field>-->
    <!--</record>-->

    <!--<record model="ir.ui.view" id="sped_documento_tree_view">-->
        <!--<field name="name">sped.documento.tree (in l10n_br_mdfe)</field>-->
        <!--<field name="model">sped.documento</field>-->
        <!--<field name="inherit_id" ref="TODO othermodule.tree_view"/>-->
        <!--<field name="arch" type="xml">-->
            <!--&lt;!&ndash; TODO &ndash;&gt;-->
        <!--</field>-->
    <!--</record>-->

    <record model="ir.actions.act_window" id="sped_documento_act_window">
        <field name="name">Emissão de MDF-e</field>
        <field name="res_model">sped.documento</field>
        <field name="view_mode">tree,form</field>
        <field name="domain">[('emissao', '=', '0'), ('modelo', '=', '58')]</field>
        <field name="context">{'default_emissao': '0', 'default_modelo': '58'}</field>
    </record>

    <record model="ir.actions.act_window.view" id="sped_documento_emissao_mdfe_form_acao">
        <field eval="2" name="sequence"/>
        <field name="view_mode">form</field>
        <field name="view_id" ref="sped_documento_form_view"/>
        <field name="act_window_id" ref="sped_documento_act_window"/>
    </record>

    <record model="ir.actions.act_window.view" id="sped_documento_emissao_mdfe_tree_acao">
        <field eval="1" name="sequence"/>
        <field name="view_mode">tree</field>
        <field name="view_id" ref="sped_documento_mdfe_tree"/>
        <field name="act_window_id" ref="sped_documento_act_window"/>
    </record>

    <record model="ir.ui.menu" id="sped_documento_menu">
        <field name="name">MDF-e</field>
        <field name="parent_id" ref="sped.menu_sped_documento_emissao"/>
        <field name="action" ref="sped_documento_act_window"/>
        <field name="sequence" eval="40"/>
    </record>

</odoo>
