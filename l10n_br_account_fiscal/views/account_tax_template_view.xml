<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <record id="l10n_br_account_tax_template_form" model="ir.ui.view">
        <field name="name">l10n_br_account.tax.template.form</field>
        <field name="model">account.tax.template</field>
        <field name="inherit_id" ref="account.view_account_tax_template_form"/>
        <field name="arch" type="xml">
            <field name="name" position="after">
                <field name="fiscal_tax_id" groups="l10n_br_fiscal.group_user"/>
            </field>
            <field name="amount" position="attributes">
                <attribute name="attrs">{'readonly': [('fiscal_tax_id', '!=', False)]}</attribute>
                <attribute name="force_save">1</attribute>
            </field>
            <field name="amount_type" position="attributes">
                <attribute name="attrs">{'readonly': [('fiscal_tax_id', '!=', False)]}</attribute>
                <attribute name="force_save">1</attribute>
            </field>
            <xpath expr="//notebook[1]" position="inside" groups="l10n_br_fiscal.group_user">
                <page name="brazilian_tax" string="Brazilian Tax" attrs="{'invisible': [('fiscal_tax_id', '=', False)]}">
                    <group name="brazilian_tax">
                        <group name="tax_input" string="Input" attrs="{'invisible': [('fiscal_tax_domain', 'not in', ('ipi', 'icms', 'pis', 'cofins'))]}">
                            <field name="fiscal_cst_in_id"/>
                        </group>
                        <group name="tax_output" string="Output" attrs="{'invisible': [('fiscal_tax_domain', 'not in', ('ipi', 'icms', 'pis', 'cofins'))]}">
                            <field name="fiscal_cst_out_id"/>
                        </group>
                        <group>
                            <field name="fiscal_tax_domain"/>
                        </group>
                    </group>
                </page>
            </xpath>
        </field>
    </record>

</odoo>
