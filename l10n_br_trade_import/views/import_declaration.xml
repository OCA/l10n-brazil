<?xml version="1.0" encoding="utf-8" ?>
<odoo>

    <record id="import_declaration_search" model="ir.ui.view">
        <field name="name">l10n_br_trade_import.declaration.search</field>
        <field name="model">l10n_br_trade_import.declaration</field>
        <field name="arch" type="xml">
            <search string="Import Declaration">
                <field name="document_number" />
                <field name="document_date" />
            </search>
        </field>
    </record>

    <record id="import_declaration_tree" model="ir.ui.view">
        <field name="name">l10n_br_trade_import.declaration.tree</field>
        <field name="model">l10n_br_trade_import.declaration</field>
        <field name="arch" type="xml">
            <tree>
                <field name="document_number" />
                <field name="document_date" />
                <field name="customs_clearance_location" />
                <field name="customs_clearance_state_id" />
                <field name="customs_clearance_date" />
                <field name="transportation_type" />
                <field name="intermediary_type" />
                <field name="third_party_partner_id" />
                <field name="afrmm_value" />
                <field name="state" widget="badge" />
            </tree>
        </field>
    </record>

    <record id="import_declaration_form" model="ir.ui.view">
        <field name="name">l10n_br_trade_import.declaration.form</field>
        <field name="model">l10n_br_trade_import.declaration</field>
        <field name="arch" type="xml">
            <form string="Import Declaration">
                <header>
                    <button
                        name="action_confirm"
                        string="Confirmar"
                        type="object"
                        class="oe_highlight"
                        states="draft"
                    />
                    <button
                        name="action_generate_invoice"
                        string="Gerar Fatura"
                        type="object"
                        class="oe_highlight"
                        states="open"
                    />
                    <button
                        name="action_back2draft"
                        string="Retornar para Rascunho"
                        type="object"
                        states="open"
                    />
                    <field name="state" widget="statusbar" />
                </header>
                <sheet>
                    <group col="2">
                        <group name="main">
                            <field name="document_number" />
                            <field name="intermediary_type" />
                            <field
                                name="third_party_partner_id"
                                attrs="{
                                    'required': [('intermediary_type','in',('conta_ordem','encomenda'))],
                                    'invisible': [('intermediary_type','not in',('conta_ordem','encomenda'))]}"
                            />
                            <field name="transportation_type" />
                            <field
                                name="afrmm_value"
                                attrs="{
                                    'required': [('transportation_type','=','maritime')],
                                    'invisible': [('transportation_type','!=','maritime')]}"
                            />
                            <field name="exporting_partner_id" />
                        </group>
                        <group name="other_info">
                            <field name="document_date" />
                            <field name="account_move_id" />
                            <field name="fiscal_operation_id" />
                        </group>
                    </group>
                    <notebook>
                        <page name="additions" string="Additions">
                            <field name="addition_ids" nolabel="1">
                                <tree editable="bottom">
                                    <field name="addition_number" string="nº" />
                                    <field name="addtion_sequence" string="Item" />
                                    <field name="product_id" width="300px" />
                                    <field
                                        name="product_description"
                                        string="Descrição"
                                    />
                                    <field name="product_qty" string="Qty" />
                                    <field name="product_uom" string="Uom" />
                                    <field name="product_price_unit" string="Price" />
                                    <field name="manufacturer_id" />
                                    <!-- <field name="discount_value" /> -->
                                    <!-- <field name="drawback" /> -->
                                </tree>
                            </field>
                        </page>
                        <page name="customs_clearance" string="Other Info">
                            <group>
                                <group
                                    name="customs_clearance"
                                    string="Customs Clearance"
                                >
                                    <field
                                        name="customs_clearance_location"
                                        string="Location"
                                    />
                                    <field
                                        name="customs_clearance_state_id"
                                        string="State"
                                    />
                                    <field
                                        name="customs_clearance_date"
                                        string="Date"
                                    />
                                </group>
                                <group>
                                    <field name="declaration_file" />
                                    <field name="is_imported" />
                                </group>
                            </group>
                        </page>
                        <page name="notes" string="Notes">
                            <field name="additional_information" />
                        </page>
                    </notebook>
                </sheet>
                <div class="oe_chatter">
                    <field
                        name="message_follower_ids"
                        widget="mail_followers"
                        groups="base.group_user"
                    />
                    <field name="message_ids" widget="mail_thread" />
                </div>
            </form>
        </field>
    </record>

</odoo>
