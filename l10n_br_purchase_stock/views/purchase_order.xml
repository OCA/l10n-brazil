<?xml version="1.0" encoding="utf-8" ?>
<odoo>

    <record id="l10n_br_purchase_stock_order_form" model="ir.ui.view">
        <field name="name">l10n_br_purchase_stock.order.form</field>
        <field name="model">purchase.order</field>
        <field name="inherit_id" ref="purchase.purchase_order_form" />
        <field name="priority">120</field>
        <field name="arch" type="xml">
            <field name="fiscal_operation_id" position="after">
                <field name="button_create_invoice_invisible" invisible="1" />
            </field>

            <xpath
                expr="//button[@name='action_create_invoice'][1]"
                position="attributes"
            >
                <attribute
                    name="attrs"
                >{'invisible': [('button_create_invoice_invisible', '=', True)]}</attribute>

            </xpath>

            <xpath
                expr="//button[@name='action_create_invoice'][2]"
                position="attributes"
            >
                <attribute
                    name="attrs"
                >{'invisible': [('button_create_invoice_invisible', '=', True)]}</attribute>

            </xpath>

            <xpath expr="//field[@name='amount_tax_withholding']" position="after">
                <field name="total_cost_of_goods_purchased" />
            </xpath>

            <xpath expr="//field[@name='delivery_costs']/.." position="replace">
                <group>
                    <field name="stock_price_br" readonly="1" />
                </group>

                <group>
                    <field name="delivery_costs" invisible="1" />
                </group>

                <group col="4">
                    <field
                        name="freight_value"
                        attrs="{'readonly': [('delivery_costs', '=', 'total')]}"
                    />
                    <div class="o_row">
                        <field name="freight_value_to_stock" nolabel="1" />
                        <span
                            attrs="{'invisible': [('freight_value_to_stock', '=', True)]}"
                            class="text-muted"
                        >Frete é custo de estoque?</span>
                        <span
                            attrs="{'invisible': [('freight_value_to_stock', '=', False)]}"
                        >Frete
                            é custo de estoque?</span>
                    </div>

                    <field
                        name="insurance_value"
                        attrs="{'readonly': [('delivery_costs', '=', 'total')]}"
                    />
                    <div class="o_row">
                        <field name="insurance_value_to_stock" nolabel="1" />
                        <span
                            attrs="{'invisible': [('insurance_value_to_stock', '=', True)]}"
                            class="text-muted"
                        >Seguro é custo de estoque?</span>
                        <span
                            attrs="{'invisible': [('insurance_value_to_stock', '=', False)]}"
                        >Seguro
                            é custo de estoque?</span>
                    </div>

                    <field
                        name="other_value"
                        attrs="{'readonly': [('delivery_costs', '=', 'total')]}"
                    />
                    <div class="o_row">
                        <field name="other_value_to_stock" nolabel="1" />
                        <span
                            attrs="{'invisible': [('other_value_to_stock', '=', True)]}"
                            class="text-muted"
                        >Outras.Desp. é custo de estoque?</span>
                        <span
                            attrs="{'invisible': [('other_value_to_stock', '=', False)]}"
                        >Outras.Desp.
                            é custo de estoque?</span>
                    </div>
                </group>

                <group name="tax_credits" string="Tax Credits">
                    <group>
                        <field name="icms_tax_is_creditable" />
                        <field name="ipi_tax_is_creditable" />
                        <field name="cofins_tax_is_creditable" />
                        <field name="pis_tax_is_creditable" />
                    </group>
                    <group>
                        <field name="icmsst_tax_is_creditable" />
                        <field name="issqn_tax_is_creditable" />
                        <field name="irpj_tax_is_creditable" />
                    </group>
                </group>
            </xpath>

        </field>
    </record>

</odoo>
