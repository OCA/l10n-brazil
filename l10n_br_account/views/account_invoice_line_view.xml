<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <record id="invoice_line_form" model="ir.ui.view">
        <field name="name">l10n_br_account.invoice.line.form</field>
        <field name="model">account.invoice.line</field>
        <field name="inherit_id" ref="account.view_invoice_line_form"/>
        <field name="arch" type="xml">
            <field name="invoice_line_tax_ids" position="replace">
                <group name="fiscal_fields" invisible="1">
                    <field name="fiscal_operation_type" invisible="1" readonly="1"/>
                    <field name="fiscal_genre_code" invisible="1"/>
                    <field name="tax_framework" invisible="1"/>
                    <field name="partner_id" invisible="1"/>
                    <field name="company_id" invisible="1"/>
                    <field name="tax_icms_or_issqn" invisible="1"/>
                </group>
                <group attrs="{'invisible': [('document_type_id', '=', False)]}">
                    <field name="fiscal_operation_id" domain="[('state', '=', 'approved'), ('fiscal_operation_type', '=', fiscal_operation_type)]"/>
                    <field name="fiscal_operation_line_id"/>
                    <field name="cfop_id" attrs="{'invisible': [('tax_icms_or_issqn', '=', 'issqn')]}"/>
                    <field name="document_type_id" invisible="1"/>
                </group>
            </field>
            <field name="name" position="after">
                <notebook attrs="{'invisible': [('document_type_id', '=', False)]}">
                    <page name="fiscal_taxes" string="Taxes"/>
                    <page name="others" string="Others">
                        <group>
                            <field name="freight_value"/>
                            <field name="insurance_value"/>
                            <field name="other_costs_value"/>
                        </group>
                    </page>
                    <page name="fiscal_line_extra_info" string="Extra Info"/>
                    <page name="accounting" string="Accounting">
                        <group>
                            <field name="invoice_line_tax_ids" context="{'type': invoice_type}" domain="[('type_tax_use','!=','none'),('company_id', '=', company_id)]" widget="many2many_tags" options="{'no_create': True}"/>
                        </group>
                    </page>
                </notebook>
            </field>
        </field>
    </record>

</odoo>
