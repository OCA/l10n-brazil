<?xml version="1.0" encoding="utf-8" ?>
<odoo>

    <record id="view_l10n_br_pos_search" model="ir.ui.view">
        <field name="name">l10n_br_pos.order.search</field>
        <field name="model">pos.order</field>
        <field name="inherit_id" ref="point_of_sale.view_pos_order_filter" />
        <field name="arch" type="xml">
            <field name="name" position="before">
<!--                <field name="chave_cfe" string="Chave CFE"/>-->
                <field name="legal_name" string="Razão Social" />
                <field name="cnpj_cpf" string="CNPJ/CPF" />
                <field name="ie" string="Inscr. Estadual" />
                <field name="fiscal_coupon_date" string="Data Cupom Fiscal" />
            </field>
        </field>
    </record>
    <record model="ir.ui.view" id="view_pos_pos_form">
        <field name="name">POS Order (remove invoice button)</field>
        <field name="model">pos.order</field>
        <field name="inherit_id" ref="point_of_sale.view_pos_pos_form" />
        <field name="arch" type="xml">
<!--            <xpath expr="//button[@name='refund']" position="replace">-->
<!--            </xpath>-->
<!--            <xpath expr="//button[@string='Reprint']" position="replace">-->
<!--                <button name="!!!(act_l10n_br_pos_return)!!!" string="Devolução"-->
<!--                        type="action" groups="base.group_user"-->
<!--                        attrs="{'invisible': ['|',('state', 'not in', ['done', 'paid']), ('canceled_order', '=', True)]}"/>-->
<!--            </xpath>-->
            <field name="fiscal_position_id" position="before">
                <field name="cnpj_cpf" />
                <field name="fiscal_operation_id" required="True" />
<!--                <field name="ind_pres" required="True" />-->
<!--                <field name="cfe_return"/>-->
<!--                <field name="chave_cfe"/>-->
<!--                <field name="num_sessao_sat"/>-->
<!--                <field name="canceled_order"/>-->
<!--                <field name="pos_order_associated"/>-->
<!--                <field name="cfe_cancelamento_return"/>-->
<!--                <field name="chave_cfe_cancelamento"/>-->
<!--                <field name="num_sessao_sat_cancelamento"/>-->
            </field>
            <field name="date_order" position="after">
                <field name="fiscal_coupon_date" string="Data Cupom Fiscal" />
            </field>
            <group name="order_fields" position="after">
<!--                <group string="Informações do documento fiscal" name="fiscal_document_information">-->

<!--                </group>-->
                  <group name="l10n_br_fiscal" colspan="4">
                    <field name="document_electronic" invisible="1" />
                    <field name="edoc_purpose" />
                    <field name="ind_final" />
                    <field name="ind_pres" />
                  </group>
                  <group>
                    <field name="document_type_id" required="1" />
                    <label
                        for="document_key"
                        attrs="{'invisible': [('document_electronic', '=', False)]}"
                    />
                    <div
                        class="o_row"
                        attrs="{'invisible': [('document_electronic', '=', False)]}"
                    >
                      <field name="document_key" force_save="1" class="oe_inline" />
                    </div>
                  </group>
                  <group>
                    <group name="document_header_right">
                      <field name="document_serie_id" />
                      <field name="document_serie" />
                    </group>
                    <group name="document_header_left">
                      <field name="document_number" force_save="1" />
                      <field name="authorization_file" />
                    </group>
                  </group>
            </group>
            <field name="pos_reference" position="after">
                <field name="fiscal_operation_id" />
            </field>
            <page name="extra" position="after">
                <page name="cupom_cancelado" string="Cancelamento">
                    <group>
                        <group name="cancel_document_header_right">
                          <field name="cancel_document_key" />
                          <field name="cancel_document_session_number" />
                          <field name="cancel_file" />
                        </group>
                    </group>
                </page>
            </page>
<!--            <button name="action_invoice" position="attributes">-->
<!--                <attribute name="invisible">1</attribute>-->
<!--                <attribute name="states"/>-->
<!--            </button>-->
<!--            <field name="state" position="replace">-->
<!--                <field name="state" widget="statusbar"-->
<!--                       statusbar_visible="draft,paid,devolucoes,done"-->
<!--                       statusbar_colors='{"cancel":"red"}'/>-->
<!--            </field>-->
<!--            <field name="lines" position="replace">-->
<!--                <field name="lines" colspan="4" nolabel="1">-->
<!--                    <tree string="Order lines" editable="bottom">-->
<!--                        <field name="product_id"-->
<!--                               on_change="onchange_product_id(parent.pricelist_id,product_id,qty,parent.partner_id)"/>-->
<!--                        <field name="qty"/>-->
<!--                        <field name="qtd_produtos_devolvidos"-->
<!--                               on_change="onchange_qty(product_id, discount, qty, price_unit, context)"/>-->
<!--                        <field name="price_unit"-->
<!--                               on_change="onchange_qty(product_id, discount, qty, price_unit, context)"/>-->
<!--                        <field name="discount"-->
<!--                               on_change="onchange_qty(product_id, discount, qty, price_unit, context)"/>-->
<!--                        <field name="price_subtotal"/>-->
<!--                        <field name="price_subtotal_incl"/>-->
<!--                    </tree>-->
<!--                    <form string="Order lines">-->
<!--                        <group col="4">-->
<!--                            <field name="product_id"-->
<!--                                   on_change="onchange_product_id(parent.pricelist_id,product_id,qty,parent.partner_id)"/>-->
<!--                            <field name="qty"-->
<!--                                   on_change="onchange_qty(product_id, discount, qty, price_unit, context)"/>-->
<!--                            <field name="qtd_produtos_devolvidos"/>-->
<!--                            <field name="discount"-->
<!--                                   on_change="onchange_qty(product_id, discount, qty, price_unit, context)"/>-->
<!--                            <field name="price_unit"-->
<!--                                   on_change="onchange_qty(product_id, discount, qty, price_unit, context)"/>-->
<!--                            <field name="price_subtotal" invisible="1"/>-->
<!--                            <field name="price_subtotal_incl" invisible="1"/>-->
<!--                            <field name="notice"/>-->
<!--                        </group>-->
<!--                    </form>-->
<!--                </field>-->
<!--            </field>-->
            <xpath expr="//sheet" position="after">
                <div class="oe_chatter">
                    <field name="message_follower_ids" widget="mail_followers" />
                    <field name="activity_ids" widget="mail_activity" />
                    <field name="message_ids" widget="mail_thread" />
                </div>
            </xpath>
        </field>
    </record>

    <!-- POS order tree -->
    <record model="ir.ui.view" id="view_pos_order_tree">
        <field
            name="name"
        >POS Order (hide invoice ID and show simplified fields)</field>
        <field name="model">pos.order</field>
        <field name="inherit_id" ref="point_of_sale.view_pos_order_tree" />
        <field name="arch" type="xml">
<!--            <field name="invoice_id" position="attributes">-->
<!--                <attribute name="invisible">1</attribute>-->
<!--            </field>-->
<!--            <field name="pos_reference" position="after">-->
<!--                <field name="simplified" string="Simplified"/>-->
<!--                <field name="fiscal_document_type" string="Type"/>-->
<!--            </field>-->
            <field name="partner_id" position="after">
                <field name="cnpj_cpf" />
            </field>
            <field name="date_order" position="after">
                <field name="fiscal_coupon_date" />
            </field>
        </field>
    </record>

<!--    &lt;!&ndash; POS order tree &ndash;&gt;-->
<!--    <record model="ir.ui.view" id="view_pos_order_form">-->
<!--        <field name="name">POS Order (Show Invoice type)</field>-->
<!--        <field name="model">pos.order</field>-->
<!--        <field name="inherit_id" ref="point_of_sale.view_pos_pos_form"/>-->
<!--        <field name="arch" type="xml">-->
<!--            <field name="sale_journal" position="after">-->
<!--                <field name="fiscal_document_type"/>-->
<!--            </field>-->
<!--        </field>-->
<!--    </record>-->

<!--    &lt;!&ndash; POS order search &ndash;&gt;-->
<!--    <record id="view_pos_order_filter" model="ir.ui.view">-->
<!--        <field name="name">POS Order (add filters for simplified field)</field>-->
<!--        <field name="model">pos.order</field>-->
<!--        <field name="inherit_id" ref="point_of_sale.view_pos_order_filter"/>-->
<!--        <field name="priority">20</field>-->
<!--        <field name="arch" type="xml">-->
<!--            <filter string="Posted" position="after">-->
<!--                <separator/>-->
<!--                <filter string="Invoices" name="invoices"-->
<!--                        domain="[('simplified', '=', False)]"/>-->
<!--                <filter string="Simplified invoices" name="invoices"-->
<!--                        domain="[('simplified', '=', True)]"/>-->
<!--            </filter>-->
<!--        </field>-->
<!--    </record>-->


</odoo>
